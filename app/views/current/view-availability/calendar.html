<!-- Use this page as the index for your project -->

<!-- ADDING CUSTOM CSS - Add your custom CSS or Sass in /app/assets/sass/main.scss -->

<!-- Extends the layout from /views/layout.html -->
{% extends 'layout-top-nav.html' %}

<!--
  In /views/layout.html you can:
    - change the header and footer
    - add custom CSS and JavaScript
-->

<!-- Set the page title -->
{% block pageTitle %}
Site overview Hornsey Central Pharmacy
{% endblock %}

<!-- For adding a breadcrumb -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/breadcrumbs -->
{% block beforeContent %}
{% endblock %}

<!-- For adding a back link -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/back-link -->
{% block outerContent %}
{% endblock %}

<!-- For adding page content -->
<!-- Page layout code can be found at https://service-manual.nhs.uk/design-system/styles/layout -->
{% block content %}


    
      <h1 class="nhsuk-heading-l">View availability for  {{ date({month: 'long'}) }} 2025</h1>
    </h1>



<h2 class="nhsuk-heading-m">Filter</h2>

<div class="nhsuk-grid-row">
  
 
<div class="nhsuk-grid-column-one-quarter">

<h3 class="nhsuk-heading-m">Date range</h3>

<div class="moj-datepicker" data-module="moj-date-picker">
  <div class="nhsuk-form-group">
    <label class="nhsuk-label" for="date">
      Date
    </label>
    <div id="date-hint" class="nhsuk-hint">
      For example, 17/5/2024.
    </div>
    <input class="nhsuk-input moj-js-datepicker-input" id="date" name="date" type="text" aria-describedby="date-hint" autocomplete="off">
  </div>
  <div class="datepicker" id="datepicker">
    <div class="datepicker-header">
      <div class="datepicker-controls">
        <button class="prev-month">&lt;</button>
      </div>
      <div class="datepicker-month-selector"></div>
      <div class="datepicker-controls">
        <button class="next-month">&gt;</button>
      </div>
    </div>
    <div class="datepicker-grid">
      <!-- Day headers will be inserted here -->
    </div>
  </div>
</div>

<div class="moj-datepicker" data-module="moj-date-picker">

  <div class="nhsuk-form-group">
    <label class="nhsuk-label" for="date">
      Date
    </label>

    <div id="date-hint" class="nhsuk-hint">
      For example, 17/5/2024.
    </div>

    <input class="nhsuk-input moj-js-datepicker-input " id="date" name="date" type="text" aria-describedby="date-hint" autocomplete="off">

  </div>

</div>


  

</div>

<div class="nhsuk-grid-column-one-quarter">

  <h3 class="nhsuk-heading-m">Date range</h3>
  
  <div class="moj-datepicker" data-module="moj-date-picker">
  
    <div class="nhsuk-form-group">
      <label class="nhsuk-label" for="date">
        Date
      </label>
  
      <div id="date-hint" class="nhsuk-hint">
        For example, 17/5/2024.
      </div>
  
      <input class="nhsuk-input moj-js-datepicker-input " id="date" name="date" type="text" aria-describedby="date-hint" autocomplete="off">
  
    </div>
  
  </div>
  
  
    
  
  </div>


</div>



<div class="nhsuk-grid-row">
  
 
  <div class="nhsuk-grid-column-one-quarter">
{% from 'checkboxes/macro.njk' import checkboxes %}

<form>
  {{ checkboxes({
    idPrefix: "example",
    name: "example",
    fieldset: {
      legend: {
        text: "Services",
        classes: "nhsuk-fieldset__legend--m",
        isPageHeading: true
      }
    },

    items: [
      {
        value: "email",
        text: "RSV"
      },
      {
        value: "phone",
        text: "Covid"
      },
      {
        value: "text message",
        text: "RSV adult"
      }
    ]
  }) }}
</form>


{% from 'button/macro.njk' import button %}

{{ button({
  text: "Apply filters"
}) }}

</div>
</div>

<div class="nhsuk-grid-row">
  
 
  <div class="nhsuk-grid-column-one-half">
<h3 class="nhsuk-heading-m">Sessions available on</h3>

<ul>

  <li>
    Monday 9 December 2024 to Wednesday 11 December 2024 - 3 days</li>
    <li>Sunday 29 December 2024 - 1 day</li>
  <li>Thursday 31 December 2024 to Saturday 3 February 2025 - 4 weeks and 6 days</li>
</ul>
</div>
</div>

  
<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-full">

    <div class="moj-scrollable-pane">

      <p class="nhsuk-body nhsuk-body--l">Key</p>
  
      <div class="calendar">
  
      <ul class="days">
      <!-- add filler at beginning of month -->
          <li class="out_of_range calendar-day">
            
              <div class="date day_cell">Available</div>
          </li>
          <li class="out_of_range calendar-day occupied">
          
            <div class="date day_cell">Occupied</div>
          </li>            
          <li class="calendar-day selected">
              <div class="date day_cell">Selected</div>
              
          </li>
          </ul>
          </div>
        

<div class="calendar">
  
  
  <ul class="days">
  <!-- add filler at beginning of month -->
      <li class="out_of_range calendar-day selected">
          <div class="date day_cell">Mon 09 Dec</div>
          <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day available">
        <div class="date day_cell">Tues 10 Dec</div>
        <div class="show-info">0 spaces</div>
      </li>            
      <li class="calendar-day occupied">
        <div class="date day_cell">Wed 11 Dec</div>
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Thur 12 Dec</div>
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Fri 13 Dec</div>
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Sat 14 Dec</div>
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Sun 15 Dec</div>
        
          <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 16 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Tue 17 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Wed 18 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Thu 19 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Fri 20 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Sat 21 Dec</div>
        
          <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Sun 22 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 23 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Tue 24 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Wed 25 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Thur 26 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Fri 27 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Sat 28 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Sun 29 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 30 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Tue 31 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>

</ul>
</div>

<div class="calendar">
  
  
  <ul class="days">
  <!-- add filler at beginning of month -->

      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 09 Dec</div>
        
          <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 09 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 09 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 09 Dec</div>
        
          <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 09 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 09 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 09 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 09 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 09 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      <li class="calendar-day occupied">
        <div class="date day_cell">Mon 09 Dec</div>
        
        <div class="show-info">0 spaces</div>
      </li>
      
              
  <!-- add filler at end of month -->
      <li class="out_of_range calendar-day">
          <div class="date day_cell"></div>
      </li>
      <li class="out_of_range calendar-day">
          <div class="date day_cell"></div>
      </li>
  </ul>
  

</div>


  </div>
</div>
</div>
  
 

    

{% endblock %}

{% block pageScripts %}
<script>
<!-- Add any javascript files here. Include javascript files only on the pages
that need them. Excessive javascript files loaded on other pages may slow down
the response times of the prototype. -->
document.addEventListener('DOMContentLoaded', function() {
  const datePicker = {
    inputElement: document.querySelector('.moj-js-datepicker-input'),
    datePickerElement: document.getElementById('datepicker'),
    monthSelectorElement: document.querySelector('.datepicker-month-selector'),
    gridElement: document.querySelector('.datepicker-grid'),
    prevButton: document.querySelector('.prev-month'),
    nextButton: document.querySelector('.next-month'),
    selectedDate: null,
    currentMonth: new Date().getMonth(),
    currentYear: new Date().getFullYear(),
    dayNames: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],
    monthNames: [
      'January', 'February', 'March', 'April', 'May', 'June', 
      'July', 'August', 'September', 'October', 'November', 'December'
    ],
    
    init: function() {
      this.renderCalendar();
      this.attachEventListeners();
    },
    
    renderCalendar: function() {
      // Clear grid
      this.gridElement.innerHTML = '';
      
      // Add day headers
      this.dayNames.forEach(day => {
        const dayHeader = document.createElement('div');
        dayHeader.className = 'datepicker-day-header';
        dayHeader.textContent = day;
        this.gridElement.appendChild(dayHeader);
      });
      
      // Update month and year display
      this.monthSelectorElement.textContent = `${this.monthNames[this.currentMonth]} ${this.currentYear}`;
      
      // Get first day of month and total days
      const firstDay = new Date(this.currentYear, this.currentMonth, 1).getDay();
      const daysInMonth = new Date(this.currentYear, this.currentMonth + 1, 0).getDate();
      
      // Previous month days
      const prevMonthDays = new Date(this.currentYear, this.currentMonth, 0).getDate();
      for (let i = firstDay - 1; i >= 0; i--) {
        const dayCell = document.createElement('div');
        dayCell.className = 'datepicker-cell inactive';
        dayCell.textContent = prevMonthDays - i;
        this.gridElement.appendChild(dayCell);
      }
      
      // Current month days
      for (let i = 1; i <= daysInMonth; i++) {
        const dayCell = document.createElement('div');
        dayCell.className = 'datepicker-cell';
        dayCell.textContent = i;
        
        // Check if this date is selected
        if (this.selectedDate && 
            this.selectedDate.getDate() === i && 
            this.selectedDate.getMonth() === this.currentMonth && 
            this.selectedDate.getFullYear() === this.currentYear) {
          dayCell.classList.add('selected');
        }
        
        dayCell.addEventListener('click', () => this.selectDate(i));
        this.gridElement.appendChild(dayCell);
      }
      
      // Fill remaining slots with next month days
      const totalCells = Math.ceil((firstDay + daysInMonth) / 7) * 7;
      let nextMonthDay = 1;
      for (let i = firstDay + daysInMonth; i < totalCells; i++) {
        const dayCell = document.createElement('div');
        dayCell.className = 'datepicker-cell inactive';
        dayCell.textContent = nextMonthDay++;
        this.gridElement.appendChild(dayCell);
      }
    },
    
    attachEventListeners: function() {
      // Handle input field focus
      this.inputElement.addEventListener('focus', () => {
        this.datePickerElement.classList.add('active');
      });
      
      // Handle clicking outside the datepicker
      document.addEventListener('click', (e) => {
        if (!this.datePickerElement.contains(e.target) && 
            e.target !== this.inputElement) {
          this.datePickerElement.classList.remove('active');
        }
      });
      
      // Handle month navigation
      this.prevButton.addEventListener('click', () => {
        this.currentMonth--;
        if (this.currentMonth < 0) {
          this.currentMonth = 11;
          this.currentYear--;
        }
        this.renderCalendar();
      });
      
      this.nextButton.addEventListener('click', () => {
        this.currentMonth++;
        if (this.currentMonth > 11) {
          this.currentMonth = 0;
          this.currentYear++;
        }
        this.renderCalendar();
      });
      
      // Parse date from input if already has value
      if (this.inputElement.value) {
        this.parseInputDate();
      }
    },
    
    selectDate: function(day) {
      this.selectedDate = new Date(this.currentYear, this.currentMonth, day);
      this.inputElement.value = this.formatDate(this.selectedDate);
      this.datePickerElement.classList.remove('active');
      this.renderCalendar(); // Re-render to show selection
    },
    
    formatDate: function(date) {
      const day = date.getDate();
      const month = date.getMonth() + 1;
      const year = date.getFullYear();
      return `${day}/${month}/${year}`;
    },
    
    parseInputDate: function() {
      const value = this.inputElement.value;
      const parts = value.split('/');
      
      if (parts.length === 3) {
        const day = parseInt(parts[0], 10);
        const month = parseInt(parts[1], 10) - 1;
        const year = parseInt(parts[2], 10);
        
        if (!isNaN(day) && !isNaN(month) && !isNaN(year)) {
          this.selectedDate = new Date(year, month, day);
          this.currentMonth = month;
          this.currentYear = year;
          this.renderCalendar();
        }
      }
    }
  };
  
  // Initialize the date picker
  datePicker.init();
});

</script>

{% endblock %}
